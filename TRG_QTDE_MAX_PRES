create or replace TRIGGER TRG_QTDE_MAX_PRES
INSTEAD OF INSERT OR DELETE ON V_LISTAPRESENTE
FOR EACH ROW 
DECLARE     
    V_QTD_ATUAL NUMBER;

BEGIN
    IF INSERTING THEN
        SELECT COUNT(*) INTO V_QTD_ATUAL
        FROM LISTAPRESENTE
        WHERE AID = :NEW.AID;

        IF V_QTD_ATUAL >= 10 THEN

        RAISE_APPLICATION_ERROR(-20007, 'ERRO: M√ÅXIMO DE 10 PRESENTES PERMITIDO.');
    END IF;
END IF;

    IF DELETING THEN 
        SELECT COUNT(*) INTO V_QTD_ATUAL
        FROM LISTAPRESENTE
        WHERE AID = :OLD.AID;

        IF V_QTD_ATUAL <=1 THEN

    RAISE_APPLICATION_ERROR(-20009, 'ERRO: A LISTA DEVE TER NO MINIMO 1 PRESENTE.');

        END IF;
    END IF;
END;
